웹 개발을 하다 보면 데이터를 브라우저에 저장해야 할 일이 꼭 생긴다.  
  
로그인 상태를 유지하거나, 사용자가 설정한 테마를 기억한다던가 장바구니 정보를 저장하는 등의 상황이 생기는데 이럴때 사용하는 것이 바로 **쿠키, localStorage, sessionStorage 이다.  
  
**

---

#### **쿠키(Cookie)란?  
**

쿠키는 **서버와 클라이언트가 함께 사용하는 저장소로**

브라우저가 쿠키를 가지고 있으면, **HTTP 요청마다 자동으로 쿠키를 서버에 같이 보내게 된다.**

```
// 쿠키 직접 설정
document.cookie = "token=abc123; max-age=3600";
```

-   key=value 형태로 저장된다.
-   요청마다 서버로 전송됨 → 오버헤드 발생 주의
-   용량 제한 약 4KB
-   Expires, Max-Age로 만료일 설정 가능
-   Path, Secure, HttpOnly 등의 속성 존재
    -   Secure는 HTTPS 연결에서만 쿠키가 전송되도록 제한하는 설정
    -   HttpOnly는 자바스크립트에서 해당 쿠키에 접근할 수 없도록 차단하는 옵션

---

####  **localStorage란?**

localStorage는 **오직 클라이언트(브라우저)에서만 사용하는 저장소이다.**

**HTTP 요청과는 전혀 관련이 없고** 그래서 서버에는 데이터가 전송되지 않는다.  
  

```
localStorage.setItem("nickname", "mingyu");
localStorage.getItem("nickname"); // "mingyu"
```

-   약 5MB까지 저장 가능
-   브라우저나 탭을 꺼도 데이터는 유지됨
-   도메인이 같으면 다른 탭에서도 공유됨

---

#### **sessionStorage란?**

sessionStorage는 **브라우저 탭 하나에만 유효한 저장소로**

탭을 닫으면 데이터는 바로 사라지게 된다.

```
sessionStorage.setItem("draft", "hello");
sessionStorage.getItem("draft"); // "hello"
```

-   약 5MB 저장 가능
-   탭을 닫으면 데이터 삭제 된다.
-   같은 사이트여도 탭마다 독립적이다.

---

**비교**

| 항목 | 쿠키 | **localStorage** | **sessionStorage** |
| --- | --- | --- | --- |
| 저장 위치 | 브라우저 + 서버 | 브라우저 | 브라우저 |
| 용량 제한 | 약 4KB | 약 5MB | 약 5MB |
| 서버 전송 여부 | O (자동 포함) | X | X |
| 유지 기간 | 설정 가능 | 영구 저장 | 탭 종료 시 삭제 |
| 탭 간 공유 | O | O | X |
| 접근 방식 | JS, 서버 모두 가능 | JS만 가능 | JS만 가능 |

---

#### **쿠키 vs localStorage vs sessionStorage 언제 써야 할까?**

**1\. 로그인 상태 유지, 인증 토큰 저장**

  
✅ **쿠키**를 사용하는 것을 추천

사용자가 로그인하면 서버에서는 토큰과 같은 인증 정보를 발급해주고 이 정보를 저장해서 다음 요청에도 계속 로그인된 상태를 유지하고 싶을 때 쿠키가 가장 적합하다

왜냐하면 쿠키는 **자동으로 HTTP 요청과 함께 서버로 전송되기 때문에**

서버가 “이건 로그인한 사용자구나”라고 쉽게 판단할 수 있다.

단, 보안이 중요한 정보라면 꼭 HttpOnly, Secure 옵션을 설정해서 **자바스크립트로는 접근 못 하도록**, **HTTPS에서만 동작하도록** 보호해줘야 한다.

**2\. 다크모드, 글꼴 크기 같은 사용자 설정을 저장할 때**

✅ **localStorage** 를 사용하는 것을 추천

이런 데이터는 **서버까지 보낼 필요가 없는 정보다**.

브라우저 안에서만 사용되고, 사용자가 설정해두면 **다음에 접속해도 그대로** 유지되면 좋을 정보

localStorage는 **브라우저를 꺼도 데이터가 사라지지 않기 때문에**, 테마, 언어 설정 같은 **사용자 맞춤 설정**을 저장할 때 자주 쓰인다.

**3\. 회원가입 양식을 작성하다가 탭을 닫을 수도 있을 때**

✅ **session****Storage** 를 사용하는 것을 추천

사용자가 글을 쓰거나 회원가입 정보를 입력하다가 실수로 새로고침하거나 탭을 닫는 경우가 있다.

이럴 때 데이터를 잃어버리면 안 되니, **임시 저장** 기능이 필요하다.

하지만 그 데이터는 오래 보관할 필요는 없고, **지금 탭에서만** 잠깐 보관되면 되므로

그럴 땐 sessionStorage를 사용하는 것이 좋다.

sessionStorage는 **브라우저 탭이 닫히면 자동으로 삭제**되기 때문에 “지금 이 탭에서만 유효한 임시 데이터”에 적합하다.

**4\. 여러 탭에서 데이터가 공유되어야 할 때**

✅ **localStorage** 를 사용하는 것을 추천

브라우저에서 탭을 여러 개 열었는데, 로그인 상태가 유지되어야 하는 경우가 있다.

또는 하나의 탭에서 설정한 데이터가 다른 탭에도 적용돼야 할 때도 있다.

이럴 땐 localStorage가 좋다.

localStorage는 **같은 도메인이라면 탭끼리도 데이터를 공유할 수 있기 때문**

반면 sessionStorage는 탭마다 독립적이라 이런 공유가 불가능하다.

---

**저장소별 피해야할 상황**

| **상황**                   | **피해야 할 저장소**                 | **이유**                 |
| ------------------------ | ----------------------------- | ---------------------- |
| 주민등록번호, 카드번호 등 민감 정보 저장  | localStorage / sessionStorage | 암호화 없이 저장되면 XSS에 취약    |
| 자주 바뀌는 대용량 데이터           | 쿠키                            | 요청마다 서버에 자동 전송 → 성능 저하 |
| 사용자가 탭을 닫아도 남아 있어야 할 정보  | sessionStorage                | 탭 닫으면 삭제됨              |